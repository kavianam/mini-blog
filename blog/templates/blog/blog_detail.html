{% extends 'blog/base.html' %}

{% block title %}
    Blog Detail
{% endblock %}

{% block content %}
    <h3><strong>Title: </strong>{{ blog.title }}</h3>
    <p>
        <strong>Author: </strong>
        <a href="{% url 'author-detail' blog.author.id %}">{{ blog.author }}</a>
    </p>
    <p><strong>Post Date: </strong>{{ blog.post_date }}</p>
    <h4>Content:</h4>
    <p>{{ blog.content }}</p>
    <hr>

    <h3 class="mb-3">Comments</h3>
    {% for comment in blog.comments.all %}
        <p><strong>user: {{ comment.author }} | time: {{ comment.publish_time }}</strong></p>
        <p style="white-space: pre-line">{{ comment.description }}</p>
        <hr>
    {% endfor %}

    {% if user.is_authenticated %}
        <form action="{% url 'comment-create' blog.id %}" method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <input type="submit" value="submit">
        </form>
{#        <a href="{% url 'comment-create' blog.id%}">Write a comment</a>#}
    {% else %}
        You need to <a href="{% url 'login' %}?next={{ request.path }}">login</a> to post a comment!
    {% endif %}

{% endblock %}